(this["webpackJsonpreact-auth"]=this["webpackJsonpreact-auth"]||[]).push([[0],{162:function(e,t,s){"use strict";s.r(t);var a=s(0),n=s(3),c=s(50),r=s.n(c),i=s(5),l=s(12),o=s(4),j=(s(58),s(59),s(14)),d=s.n(j),b="http://localhost:8080/api/auth/",u=function(e,t){return d.a.post(b+"login",{username:e,password:t}).then((function(e){return e.data.accessToken&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))},h=function(){window.localStorage.removeItem("user")},O=function(e,t,s){return d.a.post(b+"signup",{username:e,email:t,password:s})},m=function(){return JSON.parse(localStorage.getItem("user"))},x=s(19),v=s.n(x),f=s(15),g=s.n(f),p=s(20),S=s.n(p),w=function(e){if(!e)return Object(a.jsx)("div",{class:"alert alert-danger",role:"alert",children:"This field is required!"})},k=function(e){var t=Object(n.useRef)(),s=Object(n.useRef)(),c=Object(n.useState)(""),r=Object(i.a)(c,2),l=r[0],o=r[1],j=Object(n.useState)(""),d=Object(i.a)(j,2),b=d[0],h=d[1],O=Object(n.useState)(!1),m=Object(i.a)(O,2),x=m[0],f=m[1],p=Object(n.useState)(""),k=Object(i.a)(p,2),y=k[0],T=k[1];return Object(a.jsx)("div",{class:"col-md-12",children:Object(a.jsxs)("div",{class:"card card-container",children:[Object(a.jsx)("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),Object(a.jsxs)(v.a,{onSubmit:function(a){a.preventDefault(),T(""),f(!0),t.current.validateAll(),0===s.current.context._errors.length?u(l,b).then((function(){e.history.push("/profile"),window.location.reload()}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();f(!1),T(t)})):f(!1)},ref:t,children:[Object(a.jsxs)("div",{class:"form-group",children:[Object(a.jsx)("label",{htmlFor:"username",children:"Username"}),Object(a.jsx)(g.a,{type:"text",class:"form-control",name:"username",value:l,onChange:function(e){var t=e.target.value;o(t)},validations:[w]})]}),Object(a.jsxs)("div",{class:"form-group",children:[Object(a.jsx)("label",{htmlFor:"password",children:"Password"}),Object(a.jsx)(g.a,{type:"password",class:"form-control",name:"password",value:b,onChange:function(e){var t=e.target.value;h(t)},validations:[w]})]}),Object(a.jsx)("div",{class:"form-group",children:Object(a.jsxs)("button",{class:"btn btn-primary btn-block",disabled:x,children:[x&&Object(a.jsx)("span",{class:"spinner-border spinner-border-sm"}),Object(a.jsx)("span",{children:"Login"})]})}),y&&Object(a.jsx)("div",{class:"form-group",children:Object(a.jsx)("div",{class:"alert alert-danger",role:"alert",children:y})}),Object(a.jsx)(S.a,{style:{display:"none"},ref:s})]})]})})},y=s(51),T=function(e){if(!e)return Object(a.jsx)("div",{class:"alert alert-danger",role:"alert",children:"This field is required!"})},E=function(e){if(!Object(y.isEmail)(e))return Object(a.jsx)("div",{class:"alert alert-danger",role:"alert",children:"This is not a valid email!"})},I=function(e){if(e.length<3||e.length>20)return Object(a.jsx)("div",{class:"alert alert-danger",role:"alert",children:"Username must be between 3 and 20 characters!"})},C=function(e){if(e.length<6||e.length>30)return Object(a.jsx)("div",{class:"alert alert-danger",role:"alert",children:"Password must be between 6 and 30 characters!"})},N=function(e){var t=Object(n.useRef)(),s=Object(n.useRef)(),c=Object(n.useState)(""),r=Object(i.a)(c,2),l=r[0],o=r[1],j=Object(n.useState)(""),d=Object(i.a)(j,2),b=d[0],u=d[1],h=Object(n.useState)(""),m=Object(i.a)(h,2),x=m[0],f=m[1],p=Object(n.useState)(!1),w=Object(i.a)(p,2),k=w[0],y=w[1],N=Object(n.useState)(""),R=Object(i.a)(N,2),U=R[0],A=R[1];return Object(a.jsx)("div",{class:"col-md-12",children:Object(a.jsxs)("div",{class:"card card-container",children:[Object(a.jsx)("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),Object(a.jsxs)(v.a,{onSubmit:function(e){e.preventDefault(),A(""),y(!1),t.current.validateAll(),0===s.current.context._errors.length&&O(l,b,x).then((function(e){A(e.data.message),y(!0)}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();A(t),y(!1)}))},ref:t,children:[!k&&Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{class:"form-group",children:[Object(a.jsx)("label",{htmlFor:"username",children:"Username"}),Object(a.jsx)(g.a,{type:"text",class:"form-control",name:"username",value:l,onChange:function(e){var t=e.target.value;o(t)},validations:[T,I]})]}),Object(a.jsxs)("div",{class:"form-group",children:[Object(a.jsx)("label",{htmlFor:"email",children:"Email"}),Object(a.jsx)(g.a,{type:"text",class:"form-control",name:"email",value:b,onChange:function(e){var t=e.target.value;u(t)},validations:[T,E]})]}),Object(a.jsxs)("div",{class:"form-group",children:[Object(a.jsx)("label",{htmlFor:"password",children:"Password"}),Object(a.jsx)(g.a,{type:"password",class:"form-control",name:"password",value:x,onChange:function(e){var t=e.target.value;f(t)},validations:[T,C]})]}),Object(a.jsx)("div",{class:"form-group",children:Object(a.jsx)("button",{class:"btn btn-primary btn-block",children:"Sign Up"})})]}),U&&Object(a.jsx)("div",{class:"from-group",children:Object(a.jsx)("div",{class:k?"alert alert-success":"alert alert-danger",role:"alert",children:U})}),Object(a.jsx)(S.a,{style:{display:"none"},ref:s})]})]})})};function R(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.accessToken?{"x-access-token":e.accessToken}:{}}var U="http://localhost:8080/api/test/",A=function(){return d.a.get(U+"all")},F=function(){return d.a.get(U+"user",{headers:R()})},J=function(){return d.a.get(U+"admin",{headers:R()})},_=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),s=t[0],c=t[1];return Object(n.useEffect)((function(){A().then((function(e){c(e.data)}),(function(e){var t=e.response&&e.response.data||e.message||e.toString();c(t)}))}),[]),Object(a.jsx)("div",{class:"container",children:Object(a.jsx)("header",{class:"jumbotron",children:Object(a.jsx)("h3",{children:s})})})},D=function(){var e=m();return Object(a.jsxs)("div",{class:"container",children:[Object(a.jsx)("header",{class:"jumbotron",children:Object(a.jsxs)("h3",{children:[Object(a.jsx)("strong",{children:e.username})," Profile"]})}),Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"Token: "})," ",e.accessToken.substring(0,20)," ... "," ",e.accessToken.substr(e.accessToken.length-20)]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"ID: "})," ",e.id]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"Email: "})," ",e.email]}),Object(a.jsx)("strong",{children:"Authorities: "}),Object(a.jsx)("ul",{children:e.roles&&e.roles.map((function(e,t){return Object(a.jsx)("li",{children:e},t)}))})]})},L=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),s=t[0],c=t[1];return Object(n.useEffect)((function(){F().then((function(e){c(e.data)}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();c(t)}))}),[]),Object(a.jsx)("div",{class:"container",children:Object(a.jsx)("header",{class:"jumbotron",children:Object(a.jsx)("h3",{children:s})})})},P=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),s=t[0],c=t[1];return Object(n.useEffect)((function(){J().then((function(e){c(e.data)}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();c(t)}))}),[]),Object(a.jsx)("div",{class:"container",children:Object(a.jsx)("header",{class:"jumbotron",children:Object(a.jsx)("h3",{children:s})})})},B=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),s=t[0],c=t[1],r=Object(n.useState)(void 0),j=Object(i.a)(r,2),d=j[0],b=j[1];Object(n.useEffect)((function(){var e=m();e&&(b(e),c(e.roles.includes("ROLE_ADMIN")))}),[]);return Object(a.jsxs)("div",{children:[Object(a.jsxs)("nav",{class:"navbar navbar-expand navbar-dark bg-dark",children:[Object(a.jsx)(l.b,{to:"/",class:"navbar-brand",children:"React"}),Object(a.jsxs)("div",{class:"navbar-nav mr-auto",children:[Object(a.jsx)("li",{class:"nav-item",children:Object(a.jsx)(l.b,{to:"/home",class:"nav-link",children:"Home"})}),s&&Object(a.jsx)("li",{class:"nav-item",children:Object(a.jsx)(l.b,{to:"/admin",class:"nav-link",children:"Admin Board"})}),d&&Object(a.jsx)("li",{class:"nav-item",children:Object(a.jsx)(l.b,{to:"/user",class:"nav-link",children:"User"})})]}),d?Object(a.jsxs)("div",{class:"navbar-nav ml-auto",children:[Object(a.jsx)("li",{class:"nav-item",children:Object(a.jsx)(l.b,{to:"/profile",class:"nav-link",children:d.username})}),Object(a.jsx)("li",{class:"nav-item",children:Object(a.jsx)("a",{href:"/",class:"nav-link",onClick:function(){h()},children:"Logout"})})]}):Object(a.jsxs)("div",{class:"navbar-nav ml-auto",children:[Object(a.jsx)("li",{class:"nav-item",children:Object(a.jsx)(l.b,{to:"/login",class:"nav-link",children:"Login"})}),Object(a.jsx)("li",{class:"nav-item",children:Object(a.jsx)(l.b,{to:"/register",class:"nav-link",children:"Sign Up"})})]})]}),Object(a.jsx)("div",{class:"container mt-3",children:Object(a.jsxs)(o.c,{children:[Object(a.jsx)(o.a,{exact:!0,path:["/","/home"],component:_}),Object(a.jsx)(o.a,{exact:!0,path:"/login",component:k}),Object(a.jsx)(o.a,{exact:!0,path:"/register",component:N}),Object(a.jsx)(o.a,{exact:!0,path:"/profile",component:D}),Object(a.jsx)(o.a,{path:"/user",component:L}),Object(a.jsx)(o.a,{path:"/admin",component:P})]})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(Object(a.jsx)(l.a,{children:Object(a.jsx)(B,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},59:function(e,t,s){}},[[162,1,2]]]);
//# sourceMappingURL=main.30b46cf9.chunk.js.map